server:
  port: 8080

spring:
  application:
    name: gateway-service
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      routes:
        # Auth Service
        - id: auth-service
          uri: lb://auth-service
          predicates:
            - Path=/api/auth/**
          filters:
            - RewritePath=/api/auth/(?<segment>.*), /${segment}

        # Buyer Service
        - id: buyer-service
          uri: lb://buyer-service
          predicates:
            - Path=/api/buyers/**
          filters:
            - RewritePath=/api/buyers/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Cart Service
        - id: cart-service
          uri: lb://cart-service
          predicates:
            - Path=/api/carts/**
          filters:
            - RewritePath=/api/carts/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Product Service
        - id: product-service
          uri: lb://product-service
          predicates:
            - Path=/api/products/**
          filters:
            - RewritePath=/api/products/(?<segment>.*), /${segment}

        # Seller Service
        - id: seller-service
          uri: lb://seller-service
          predicates:
            - Path=/api/sellers/**
          filters:
            - RewritePath=/api/sellers/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Farm Service
        - id: farm-service
          uri: lb://farm-service
          predicates:
            - Path=/api/farms/**
          filters:
            - RewritePath=/api/farms/(?<segment>.*), /${segment}

        # Order Service
        - id: order-service
          uri: lb://order-service
          predicates:
            - Path=/api/orders/**
          filters:
            - RewritePath=/api/orders/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Payment Service
        - id: payment-service
          uri: lb://payment-service
          predicates:
            - Path=/api/payments/**
          filters:
            - RewritePath=/api/payments/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Settlement Service
        - id: settlement-service
          uri: lb://settlement-service
          predicates:
            - Path=/api/settlements/**
          filters:
            - RewritePath=/api/settlements/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Delivery Service
        - id: delivery-service
          uri: lb://delivery-service
          predicates:
            - Path=/api/deliveries/**
          filters:
            - RewritePath=/api/deliveries/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Notification Service
        - id: notification-service
          uri: lb://notification-service
          predicates:
            - Path=/api/notifications/**
          filters:
            - RewritePath=/api/notifications/(?<segment>.*), /${segment}
            - AuthenticationFilter

        # Experience Service
        - id: experience-service
          uri: lb://experience-service
          predicates:
            - Path=/api/experiences/**
          filters:
            - RewritePath=/api/experiences/(?<segment>.*), /${segment}

        # Search Service
        - id: search-service
          uri: lb://search-service
          predicates:
            - Path=/api/search/**
          filters:
            - RewritePath=/api/search/(?<segment>.*), /${segment}

        # Review Service
        - id: review-service
          uri: lb://review-service
          predicates:
            - Path=/api/reviews/**
          filters:
            - RewritePath=/api/reviews/(?<segment>.*), /${segment}

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
  instance:
    prefer-ip-address: true

jwt:
  secret: barofarm-secret-key-for-jwt-authentication-must-be-256-bits-long

management:
  endpoints:
    web:
      exposure:
        include: health, info, gateway

