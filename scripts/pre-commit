#!/bin/sh
#
# Pre-commit hook for Baro Farm project
# ì»¤ë°‹ ì „ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì‹¤í–‰
#

echo "ğŸ” Pre-commit hook ì‹¤í–‰ ì¤‘..."

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd "$(git rev-parse --show-toplevel)" || exit 1

# ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ (Spotless + Checkstyle)
echo ""
echo "ğŸ“ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì¤‘..."
./gradlew lint --no-daemon -q

if [ $? -ne 0 ]; then
    echo ""
    echo "âŒ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì‹¤íŒ¨!"
    echo "ğŸ‘‰ í¬ë§· ìë™ ìˆ˜ì •: ./gradlew format"
    echo "ğŸ‘‰ ìƒì„¸ ë‚´ìš© í™•ì¸: build/reports/checkstyle/"
    echo ""
    exit 1
fi

echo "âœ… ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ í†µê³¼"
echo ""
echo "ğŸ‰ ëª¨ë“  ê²€ì‚¬ í†µê³¼! ì»¤ë°‹ì„ ì§„í–‰í•©ë‹ˆë‹¤."
exit 0
